{% extends "layout.html" %} {% block title %}{{user.name}} Wishlist{% endblock %} 
{% load static %}
{% block scripts %}
<script src = "{% static 'js/wishlist.js' %}"></script>

{% endblock %}

{% block content %}
	<div class="row">
		<div class="col-lg-12">
			<div class="box-element">

				<a  class="btn btn-outline-dark" href="{% url 'products' %}"> &#x2190; Continue Shopping</a>

				<br>
				<br>
				
			</div>
			
			<br>
				<ul>
					{% for product in wishlist_items %}
					<li><strong>ID:</strong> {{ product.product.id }}</li>
					<li><strong>Name:</strong> {{ product.product.name }}</li>
					<li><strong>Price of each:</strong> {{ product.product.price }}</li>
                    <button data-product="{{product.product.id}}" data-action="add" class="update-cart">
                        Add to cart
                    </button>
                    <!-- <button style="background: none; color: inherit; border: none; padding: 0; font: inherit; cursor: pointer; outline: inherit;" type="submit" data-toggle="popover" title="Don't want it anymore?" data-content = "Click to remove from wishlist." data-trigger="hover" class = "wishlist" data-product="{{product.product.id}}" data-action="remove"><span style = "font-size:2em; color: red;">&ensp;<i class="bi bi-heart-fill"></i></span></button> -->
    				<i class="bi bi-trash-fill" onclick="togglePopup('{{product.id}}')"></i>
					{% endfor %}
				</ul>
      		
			</div>
		</div>
	</div>

	{% for product in wishlist_items %}
	<section class = "popup" id = "{{product.id}}">
		<div class = overlay></div>
		<div class="content">
			<div class="close-btn" onclick="togglePopup('{{product.id}}')">&times;</div>
			<div class="text">
				Are you sure you want to delete this item?
			</div>
			<div class="form">
				<form method = "POST" action = "{% url 'deleteWishlistItem' wishlistItem_id=product.product.id %}">
					{% csrf_token %}
					<input type="hidden" name="product_id" value="{{ product.product.id }}" />
					<input type = "submit" value = "Delete" class = "submitbutton" onclick = "alert('Product deleted successfully')" />
				</form>
			</div>
		</div>
	</section>
	{% endfor%}
	
	<script>
		function togglePopup(idname)
		{
			document.getElementById(idname).classList.toggle("active");
		}
	</script>

	<!--  -->
{% endblock content %}